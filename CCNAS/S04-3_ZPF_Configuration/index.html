<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>ZPF Configuration - CCNA Journal</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "ZPF Configuration";
    var mkdocs_page_input_path = "CCNAS/S04-3_ZPF_Configuration.md";
    var mkdocs_page_url = "/CCNAS/S04-3_ZPF_Configuration/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> CCNA Journal</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../CCNA1_Cmdline/">CCNA 1 Commands</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">CCNA 2 Commands</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../CCNA2/Basic_Configuration/">Basic Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/Static_Routing/">Static Routing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/Dynamic_Routing/">Dynamic Routing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/SSH_and_Port_Security/">SSH and Port Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/VLAN_Configuration/">VLAN Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/Access_Control_Lists/">Access Control Lists</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/DHCP_Configuration/">DHCP</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/NAT_Port_Forwarding/">NAT and Port Forwarding for IPv4</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/Device_Discovery_Mx/">Device Discovery and Management</a>
                </li>
                <li class="">
                    
    <a class="" href="../../CCNA2/Miscellaneous/">Miscellaneous</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../Cisco_Voice-Notes/">Cisco Voice Basics</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">CCNA Security</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../S02-1_Securing_Network_Devices/">Securing Network Devices</a>
                </li>
                <li class="">
                    
    <a class="" href="../S02-2_Securing_Cisco_IOS_and_Configuration/">Securing Cisco IOS and Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../S02-3_AutoSecure_and_Routing_Authentication/">AutoSecure and Routing Authentication</a>
                </li>
                <li class="">
                    
    <a class="" href="../S03_Basic_AAA_Configuration/">Basic AAA Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../S04-1_Numbered_and_Named_ACLs/">Numbered and Named ACLs</a>
                </li>
                <li class="">
                    
    <a class="" href="../S04-2_IPv6_ACLs/">IPv6 ACLs</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">ZPF Configuration</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#configure-zpf">Configure ZPF</a></li>
    

    <li class="toctree-l3"><a href="#1-create-zones">1. Create Zones</a></li>
    

    <li class="toctree-l3"><a href="#2-identify-traffic">2. Identify Traffic</a></li>
    

    <li class="toctree-l3"><a href="#3-define-an-action">3. Define an Action</a></li>
    

    <li class="toctree-l3"><a href="#4-identify-a-zone-pair-and-match-to-a-policy">4. Identify a Zone-Pair and Match to a Policy</a></li>
    

    <li class="toctree-l3"><a href="#5-assign-zones-to-interfaces">5. Assign Zones to Interfaces</a></li>
    

    <li class="toctree-l3"><a href="#verify-zpf-configurations">Verify ZPF Configurations</a></li>
    

    <li class="toctree-l3"><a href="#important-features-of-zone-based-policy-firewalls">Important Features of Zone-Based Policy Firewalls</a></li>
    

    </ul>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">CCNA Journal</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>CCNA Security &raquo;</li>
        
      
    
    <li>ZPF Configuration</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong>Zone-based Policy Firewalls (ZPF)</strong> - The new configuration mode in which interfaces are assigned to security zones, and firewall policy is applied to traffic moving between the zones.</p>
<h3 id="configure-zpf">Configure ZPF</h3>
<p>Steps:</p>
<ol>
<li>Create the zones.</li>
<li>Identify traffic with a class map.</li>
<li>Define an action with a policy-map.</li>
<li>Identify a zone pair and match it to a policy map.</li>
<li>Assign zones to the appropriate interface.</li>
</ol>
<h3 id="1-create-zones">1. Create Zones</h3>
<pre><code>zone security &lt;zone-name&gt;
</code></pre>

<h3 id="2-identify-traffic">2. Identify Traffic</h3>
<pre><code>class-map type inspect [match-any|match-all] &lt;class-map-name&gt;

class-map &lt;name&gt;
  match access-group {acl#|acl-name}
  match protocol &lt;protocol-name&gt;
  match class-map &lt;class-map-name&gt;
</code></pre>

<p>Example:</p>
<pre><code>class-map type inspect match-any HTTP-TRAFFIC
  match protocol http
  match protocol https
  match protocol dns
exit
</code></pre>

<h3 id="3-define-an-action">3. Define an Action</h3>
<pre><code>policy-map inspect &lt;policy-map-name&gt;
  class type inspect &lt;class-map-name&gt;
    {inspect|drop|pass}
</code></pre>

<ul>
<li><code>inspect</code> - This action offers <em>state-based traffic control</em>. For example, if traffic traveling from the PRIVATE zone to the PUBLIC zone is inspected, the router maintains connection or session information for TCP and UDP traffic. The router would then permit return traffic sent from PUBLIC zone hosts in reply to PRIVATE zone connection requests.</li>
<li><code>drop</code> - This is the default action for all traffic. Similar to the implicit deny any at the end of every ACL, there is an <strong>explicit drop applied by the IOS to the end of every policy−map</strong>. It is listed as <code>class class-default</code> in the last section of any policy-map configuration. Other class−maps within a policy−map can also be configured to drop unwanted traffic. Unlike ACLs, traffic is silently dropped, and no ICMP unreachable messages are sent to the source of the traffic.</li>
<li><code>pass</code> - This action allows the router to forward traffic from one zone to another. The pass action does not track the state of connections. <em>Pass only allows the traffic in one direction</em>. A corresponding policy must be applied to allow return traffic to pass in the opposite direction. The pass action is ideal for secure protocols with predictable behavior, such as IPsec. However, most application traffic is better handled in the ZPF with the inspect action.</li>
</ul>
<p>Example:</p>
<pre><code>policy-map type inspec PRIV-TO-PUB-POLICY
  class type inspect HTTP-TRAFFIC
    inspect
</code></pre>

<h3 id="4-identify-a-zone-pair-and-match-to-a-policy">4. Identify a Zone-Pair and Match to a Policy</h3>
<pre><code>zone-pair security &lt;zone-pair-name&gt; \
  source {&lt;source-zone-name&gt;|self} \
  destination {&lt;destination-zone-name&gt;|self}

  service-policy type inspect &lt;policy-map-name&gt;
</code></pre>

<p>Example of a zone-pair configuration. A zone-pair named PRIV-PUB is created with PRIVATE assigned as the source zone and PUBLIC assigned as the destination zone. Then the policy-map created in the previous step is associated to the zone-pair.</p>
<pre><code>zone-pair security PRIV-PUB source PRIVATE destination PUBLIC
  service-policy type inspect PRIV-TO-PUB-POLICY
</code></pre>

<h3 id="5-assign-zones-to-interfaces">5. Assign Zones to Interfaces</h3>
<p>Example:</p>
<pre><code>interface g0/0
  zone-member security PRIVATE
  interface s0/0/0
  zone-member security PUBLIC
</code></pre>

<h3 id="verify-zpf-configurations">Verify ZPF Configurations</h3>
<pre><code>show policy-map type inspect zone-pair sessions

show class-map type inspect
show zone security
show zone-pair security
show policy-map type inspect
</code></pre>

<h3 id="important-features-of-zone-based-policy-firewalls">Important Features of Zone-Based Policy Firewalls</h3>
<ul>
<li>No filtering is applied for intra-zone traffic.</li>
<li>Only one zone is allowed per interface.</li>
<li>No Classic Firewall and Zone-Based Policy Firewall configuration on same interface.</li>
<li>If only one zone member is assigned, all traffic is dropped.</li>
<li>Only explicitly allowed traffic is forwarded between zones.</li>
<li>Traffic to the self zone is not filtered.</li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../S04-2_IPv6_ACLs/" class="btn btn-neutral" title="IPv6 ACLs"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../S04-2_IPv6_ACLs/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script src="../../js/theme.js"></script>

</body>
</html>
